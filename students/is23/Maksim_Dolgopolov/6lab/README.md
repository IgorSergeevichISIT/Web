# Отчёт по лабораторной работе №6  
**Разработка серверной части приложения на Node.js**

---

## Цель работы

Целью работы было изучение основ разработки серверной части веб-приложения с использованием Node.js и Express.js. В рамках лабораторной работы требовалось создать полноценное REST API для галереи изображений, организовать структуру проекта по принципу разделения ответственности (Controller-Service-DAO-Repository) и интегрировать созданный бэкенд с клиентской частью приложения из предыдущих лабораторных работ.

---

## Что сделано

### 1. Разработка серверного API на Node.js и Express
- Создан сервер на Express, работающий на `localhost:8000`
- Реализованы основные CRUD-операции для сущности "акция" (изображение):
  - `GET /stocks` – получение всех изображений
  - `GET /stocks/:id` – получение изображения по ID
  - `POST /stocks` – добавление нового изображения
  - `DELETE /stocks/:id` – удаление изображения по ID
- Добавлена обработка CORS для корректной работы с клиентской частью

### 2. Архитектурная организация проекта
Проект организован по многослойной архитектуре:

- **Слой данных (Repository)** – `StocksRepository.js`
  - Работа с файловой системой через `DBConnector`
  - Чтение/запись данных в JSON-файл (`stocks.json`)

- **Слой доступа к данным (DAO)** – `StocksDAO.js`
  - Валидация входных данных
  - Преобразование данных в объекты
  - Основные операции с данными (find, findById, insert, delete)

- **Слой бизнес-логики (Service)** – `StocksService.js`
  - Оркестрация операций с данными
  - Преобразование данных для передачи наверх

- **Сетевой слой (Controller)** – `StocksController.js`
  - Обработка HTTP-запросов
  - Возврат корректных HTTP-ответов
  - Обработка ошибок

### 3. Интеграция с клиентской частью
- Создан API-клиент (`api-client.js`) для взаимодействия с сервером:
  - `getAll()` – получение всех изображений
  - `getById(id)` – получение изображения по ID
  - `create(stock)` – создание нового изображения
  - `delete(id)` – удаление изображения

- Обновлён модуль галереи (`image.js`):
  - Заменены локальные данные на запросы к серверу через `ApiClient`
  - Реализована асинхронная загрузка изображений
  - Добавлена обработка ошибок при работе с сервером

- Расширен функционал галереи:
  - Добавление новых изображений через форму
  - Удаление изображений с подтверждением
  - Просмотр детальной информации по изображению

### 4. Улучшение пользовательского интерфейса
- Добавлена форма для добавления новых изображений
- Реализованы интерактивные элементы (кнопки удаления, кликабельные карточки)
- Добавлено отображение ошибок в пользовательском интерфейсе
- Сохранён и расширен стиль из предыдущих работ

---

## Технические особенности реализации

### Серверная часть
- Использован Express.js для создания REST API
- Реализована модульная структура с разделением ответственности
- Добавлена валидация входных данных
- Настроена обработка ошибок с возвратом соответствующих HTTP-статусов

### Клиентская часть
- Полностью асинхронная работа с использованием `async/await`
- Современный подход к HTTP-запросам через `fetch`
- Динамическое обновление интерфейса без перезагрузки страницы
- Обработка сетевых ошибок и отображение пользователю

### База данных
- Временное хранение данных в JSON-файле
- Возможность легкой миграции на реальную БД
- Простая структура данных для демонстрационных целей

---

## Структура проекта

```
project/
 internal/
     api/
        api-client.js          # Клиент для работы с API
     stocks/                    # Модуль работы с изображениями
        StocksController.js    # Контроллер
        StocksService.js       # Сервис
        StocksDAO.js           # Объект доступа к данным
        StocksRepository.js    # Репозиторий
        index.js               # Роутер
 db/
     stocks.json               # JSON-база данных
 modules/
     DBConnector.js            # Коннектор к файловой БД
 index.js                      # Главный файл сервера
 (клиентские файлы из ЛР3-5)
```

---

## Итог

В результате выполнения лабораторной работы было создано полноценное веб-приложение с клиент-серверной архитектурой. Клиентская часть, разработанная в предыдущих лабораторных работах, была успешно интегрирована с серверным API на Node.js. 

**Основные достижения:**
1. Создано REST API с полным набором CRUD-операций
2. Реализована многослойная архитектура на сервере
3. Обеспечена асинхронная работа приложения
4. Добавлен новый функционал (добавление и удаление изображений)
5. Сохранена и улучшена пользовательская часть приложения

Приложение демонстрирует современный подход к разработке веб-приложений с разделением на клиентскую и серверную части, что соответствует актуальным требованиям промышленной разработки.
# Отчёт по лабораторной работе №6
**Интеграция Node.js бэкенда с клиентскими приложениями**

**Выполнил студент группы ИС-23: Остафинский В. А.**

---

## Структура проекта

### Папка `LAB3.6/`
**Содержит модифицированный проект лабораторной работы 3**

#### Папка `lab3-frontend-mod` — фронтэнд для ЛР3
#### Корневая директория
| Файл/Папка         | Назначение                                                                 |
|---------------------|---------------------------------------------------------------------------|
| `index.html`        | Главная HTML-страница приложения с Bootstrap                             |
| `main.js`           | Точка входа JavaScript приложения с API функциями для собак              |
| `package.json`      | Метаданные проекта и зависимости                            |
| `package-lock.json` | Фиксация версий зависимостей                                             |

#### Папка `components/` — компоненты приложения
| Файл                          | Назначение                                                                 |
|-------------------------------|---------------------------------------------------------------------------|
| `accordion/index.js`          | Аккордеон для отображения информации на странице собаки                   |
| `back-button/index.js`        | Кнопка "Назад" для возврата на предыдущую страницу                        |
| `dog-card/index.js`           | Карточка собаки с кнопками "Подробнее" и "Удалить"                        |

#### Папка `pages/` — страницы приложения
| Файл                     | Назначение                                                                 |
|--------------------------|---------------------------------------------------------------------------|
| `main/index.js`          | Главная страница со списком собак и формой добавления                     |
| `dog/index.js`           | Страница детальной информации о породе собаки                             |

#### Папка `node_modules/` — зависимости
| Назначение                                                                 |
|----------------------------------------------------------------------------|
| Установленные npm-пакеты                                  |

---

### Папка `lab6-backend/` — бэкенд для ЛР3
**Содержит Node.js сервер для API пород собак**

#### Корневая директория
| Файл/Папка         | Назначение                                                                 |
|---------------------|---------------------------------------------------------------------------|
| `index.js`          | Главный сервер Express.js на порту 8000                                   |
| `package.json`      | Метаданные проекта и зависимости                                      |
| `package-lock.json` | Фиксация версий зависимостей                                             |

#### Папка `db/` — база данных
| Файл           | Назначение                                                                 |
|----------------|---------------------------------------------------------------------------|
| `dogs.json`    | JSON файл с данными о породах собак                 |

#### Папка `modules/` — модули бэкенда
| Файл               | Назначение                                                                 |
|--------------------|---------------------------------------------------------------------------|
| `DBConnector.js`   | Класс для работы с файловой системой (чтение/запись JSON)                 |

#### Папка `internal/dogs/` — архитектура сущности "собаки"
| Файл                     | Назначение                                                                 |
|--------------------------|---------------------------------------------------------------------------|
| `index.js`               | Роутер Express для эндпоинтов /dogs                                       |
| `DogsController.js`      | Контроллер для обработки HTTP-запросов                                    |
| `DogsService.js`         | Сервис с бизнес-логикой                                                   |
| `DogsDAO.js`             | Data Access Object для работы с данными собак                             |
| `DogsRepository.js`      | Репозиторий для работы с хранилищем данных                                |

#### Папка `node_modules/` — зависимости бэкенда
| Назначение                                                                 |
|----------------------------------------------------------------------------|
| Установленные npm-пакеты                              |

---

### Папка `LAB4.6/`
**Содержит модифицированный проект лабораторной работы 4**

#### Корневая директория
| Файл/Папка         | Назначение                                                                 |
|---------------------|---------------------------------------------------------------------------|
| `index.html`        | Главная HTML-страница приложения с Bootstrap и иконками                   |
| `main.js`           | Точка входа с проверкой конфигурации VK API и API функциями               |
| `package.json`      | Метаданные проекта и зависимости                          |
| `package-lock.json` | Фиксация версий зависимостей                                             |

#### Папка `components/` — компоненты приложения
| Файл                          | Назначение                                                                 |
|-------------------------------|---------------------------------------------------------------------------|
| `accordion/index.js`          | Аккордеон для отображения информации на странице пользователя             |
| `back-button/index.js`        | Кнопка "Назад" для возврата на предыдущую страницу                        |
| `sort-filter/index.js`        | Компонент сортировки участников группы VK                                 |
| `user-card/index.js`          | Карточка пользователя для главной страницы                                |

#### Папка `pages/` — страницы приложения
| Файл                     | Назначение                                                                 |
|--------------------------|---------------------------------------------------------------------------|
| `main/index.js`          | Главная страница со списком пользователей, сортировкой и формой добавления|
| `user/index.js`          | Страница детальной информации о пользователе VK                           |

#### Папка `modules/` — модули для работы с VK API
| Файл               | Назначение                                                                 |
|--------------------|---------------------------------------------------------------------------|
| `ajax.js`          | Класс для работы с XMLHttpRequest                      |
| `consts.js`        | Константы: groupId, accessToken, version VK API                           |
| `urls.js`          | Генератор URL для запросов к VK API                                       |

#### Папка `node_modules/` — зависимости
| Назначение                                                                 |
|----------------------------------------------------------------------------|
| Установленные npm-пакеты                                |

---

### Папка `lab6-backend-vk/` — бэкенд для ЛР4
**Содержит Node.js сервер для API пользователей VK**

#### Корневая директория
| Файл/Папка         | Назначение                                                                 |
|---------------------|---------------------------------------------------------------------------|
| `index.js`          | Сервер Express.js на порту 8001        |
| `package.json`      | Метаданные проекта и зависимости                              |
| `package-lock.json` | Фиксация версий зависимостей                                             |

#### Папка `db/` — база данных и конфигурация
| Файл               | Назначение                                                                 |
|--------------------|---------------------------------------------------------------------------|
| `vk-users.json`    | JSON файл с данными добавленных пользователей                             |
| `config.js`        | Конфигурация VK API: токен, ID группы, версия API                         |

#### Папка `modules/` — модули бэкенда
| Файл               | Назначение                                                                 |
|--------------------|---------------------------------------------------------------------------|
| `VKAPI.js`         | Класс для запросов к VK API                                               |
| `DBConnector.js`   | Класс для работы с файловой системой                                      |

#### Папка `internal/users/` — архитектура сущности "пользователи"
| Файл                     | Назначение                                                                 |
|--------------------------|---------------------------------------------------------------------------|
| `index.js`               | Роутер Express для эндпоинтов /users                                      |
| `UsersController.js`     | Контроллер для обработки HTTP-запросов (VK + локальные данные)            |
| `UsersService.js`        | Сервис с гибридной бизнес-логикой                                         |
| `UserDAO.js`             | Data Access Object для работы с данными пользователей                     |
| `UsersRepository.js`     | Репозиторий для работы с локальным хранилищем                             |

#### Папка `node_modules/` — зависимости бэкенда
| Назначение                                                                 |
|----------------------------------------------------------------------------|
| Установленные npm-пакеты                           |

---

### Папка `LAB5.6/`
**Содержит модифицированный проект лабораторной работы 5**
(Структура идентична LAB4.6, за исключением использования Fetch API вместо XMLHttpRequest)

---

## Проделанная работа

### **Выполнение требований задания для всех лабораторных работ**

**1. Разработка бэкенда на Node.js по примеру**
   - Реализована архитектура Controller-Service-DAO-Repository
   - Созданы два независимых сервера:
     - Для ЛР3: API пород собак (`lab6-backend/`)
     - Для ЛР4/5: API пользователей VK (`lab6-backend-vk/`)
   - Поддержка CRUD операций через REST API

**2. Удаление всех `getData()` и замена на API запросы**
   - Полностью удалены статические данные из клиентского кода
   - В ЛР3: заменены вызовы `getData()` на `fetch` к `/dogs` API
   - В ЛР4/5: заменены вызовы `getData()` на `fetch` к `/users` API
   - Все данные теперь загружаются динамически с сервера

**3. Добавление возможности создания карточек**
   - **ЛР3:** Форма добавления новой породы собак с валидацией
   - **ЛР4/5:** Форма добавления пользователя с полным набором полей VK профиля
   - Раскрывающиеся формы (аккордеон) для экономии места на странице
   - Автоматическое обновление списка после добавления

**4. Добавление возможности удаления карточек**
   - Кнопка "Удалить" на каждой добавленной карточке
   - Подтверждение действия перед удалением
   - Мгновенное обновление интерфейса
   - Для ЛР4/5: удаление только локально добавленных пользователей

**6. Реализованные API эндпоинты**

**Для ЛР3 (`lab6-backend/`):**
- `GET    /dogs`     - получение всех пород собак
- `GET    /dogs/:id` - получение конкретной породы
- `POST   /dogs`     - добавление новой породы
- `DELETE /dogs/:id` - удаление породы

**Для ЛР4/5 (`lab6-backend-vk/`):**
- `GET    /users`        - все пользователи (VK + добавленные)
- `GET    /users/vk`     - только пользователи VK
- `GET    /users/custom` - только добавленные пользователи
- `GET    /users/:id`    - конкретный пользователь
- `POST   /users`        - добавить пользователя
- `DELETE /users/:id`    - удалить добавленного пользователя

---

## Как запустить

**Шаг 1: Запуск бэкенда**

1. Откройте терминал (командную строку)
2. Перейдите в папку с бэкендом:
   ```
   cd (папка с бэкэндом)
   ```
3. Запустите сервер:
   ```
   node index.js
   ```
**Шаг 2: Запуск фронтенда**

1. Откройте файл index.html
2. Нажмите кнопку "Go Live" в правом нижнем углу VS Code
{"version":3,"sources":["../src/index.ts"],"sourcesContent":["export interface LiveRegionOptions {\n  level: \"polite\" | \"assertive\"\n  document?: Document\n  root?: HTMLElement | null\n  delay?: number\n}\n\nexport type LiveRegion = ReturnType<typeof createLiveRegion>\n\nconst ID = \"__live-region__\"\n\nexport function createLiveRegion(opts: Partial<LiveRegionOptions> = {}) {\n  const { level = \"polite\", document: doc = document, root, delay: _delay = 0 } = opts\n\n  const win = doc.defaultView ?? window\n  const parent = root ?? doc.body\n\n  function announce(message: string, delay?: number) {\n    const oldRegion = doc.getElementById(ID)\n\n    // remove old region\n    oldRegion?.remove()\n\n    // Did an override level get set?\n    delay = delay ?? _delay\n\n    // create fresh region\n    const region = doc.createElement(\"span\")\n    region.id = ID\n    region.dataset.liveAnnouncer = \"true\"\n\n    // Determine redundant role\n    const role = level !== \"assertive\" ? \"status\" : \"alert\"\n\n    // add role and attributes\n    region.setAttribute(\"aria-live\", level)\n    region.setAttribute(\"role\", role)\n\n    // hide live region\n    Object.assign(region.style, {\n      border: \"0\",\n      clip: \"rect(0 0 0 0)\",\n      height: \"1px\",\n      margin: \"-1px\",\n      overflow: \"hidden\",\n      padding: \"0\",\n      position: \"absolute\",\n      width: \"1px\",\n      whiteSpace: \"nowrap\",\n      wordWrap: \"normal\",\n    })\n\n    parent.appendChild(region)\n\n    // populate region to trigger it\n    win.setTimeout(() => {\n      region.textContent = message\n    }, delay)\n  }\n\n  function destroy() {\n    const oldRegion = doc.getElementById(ID)\n    oldRegion?.remove()\n  }\n\n  return {\n    announce,\n    destroy,\n    toJSON() {\n      return ID\n    },\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AASA,IAAM,KAAK;AAEJ,SAAS,iBAAiB,OAAmC,CAAC,GAAG;AACtE,QAAM,EAAE,QAAQ,UAAU,UAAU,MAAM,UAAU,MAAM,OAAO,SAAS,EAAE,IAAI;AAEhF,QAAM,MAAM,IAAI,eAAe;AAC/B,QAAM,SAAS,QAAQ,IAAI;AAE3B,WAAS,SAAS,SAAiB,OAAgB;AACjD,UAAM,YAAY,IAAI,eAAe,EAAE;AAGvC,eAAW,OAAO;AAGlB,YAAQ,SAAS;AAGjB,UAAM,SAAS,IAAI,cAAc,MAAM;AACvC,WAAO,KAAK;AACZ,WAAO,QAAQ,gBAAgB;AAG/B,UAAM,OAAO,UAAU,cAAc,WAAW;AAGhD,WAAO,aAAa,aAAa,KAAK;AACtC,WAAO,aAAa,QAAQ,IAAI;AAGhC,WAAO,OAAO,OAAO,OAAO;AAAA,MAC1B,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,UAAU;AAAA,MACV,SAAS;AAAA,MACT,UAAU;AAAA,MACV,OAAO;AAAA,MACP,YAAY;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAED,WAAO,YAAY,MAAM;AAGzB,QAAI,WAAW,MAAM;AACnB,aAAO,cAAc;AAAA,IACvB,GAAG,KAAK;AAAA,EACV;AAEA,WAAS,UAAU;AACjB,UAAM,YAAY,IAAI,eAAe,EAAE;AACvC,eAAW,OAAO;AAAA,EACpB;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA,SAAS;AACP,aAAO;AAAA,IACT;AAAA,EACF;AACF;","names":[]}
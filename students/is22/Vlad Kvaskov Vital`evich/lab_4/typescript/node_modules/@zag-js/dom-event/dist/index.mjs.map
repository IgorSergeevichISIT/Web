{"version":3,"sources":["../src/add-dom-event.ts","../src/assertion.ts","../src/click-link.ts","../src/queue-before-event.ts","../src/fire-event.ts","../src/get-event-key.ts","../src/get-event-point.ts","../src/get-event-step.ts","../src/get-native-event.ts","../src/get-point-value.ts","../src/request-pointer-lock.ts","../src/track-focus-visible.ts","../src/pipe.ts","../src/track-pointer-move.ts","../src/track-press.ts","../src/track-visual-viewport.ts"],"sourcesContent":["interface EventMap extends DocumentEventMap, WindowEventMap, HTMLElementEventMap {}\n\ntype Node = Document | HTMLElement | EventTarget | null\n\ntype Target = (() => Node) | Node\n\nexport const addDomEvent = <K extends keyof EventMap>(\n  target: Target,\n  eventName: K,\n  handler: (event: EventMap[K]) => void,\n  options?: boolean | AddEventListenerOptions,\n) => {\n  const node = typeof target === \"function\" ? target() : target\n  node?.addEventListener(eventName, handler as any, options)\n  return () => {\n    node?.removeEventListener(eventName, handler as any, options)\n  }\n}\n","import { isMac } from \"@zag-js/dom-query\"\n\nexport function isKeyboardClick(e: Pick<MouseEvent, \"detail\" | \"clientX\" | \"clientY\">) {\n  return e.detail === 0 || (e.clientX === 0 && e.clientY === 0)\n}\n\nexport function isPrintableKey(e: Pick<KeyboardEvent, \"key\" | \"ctrlKey\" | \"metaKey\">): boolean {\n  return e.key.length === 1 && !e.ctrlKey && !e.metaKey\n}\n\nexport function isVirtualPointerEvent(e: PointerEvent) {\n  return (\n    (e.width === 0 && e.height === 0) ||\n    (e.width === 1 && e.height === 1 && e.pressure === 0 && e.detail === 0 && e.pointerType === \"mouse\")\n  )\n}\n\nexport function isVirtualClick(e: MouseEvent | PointerEvent): boolean {\n  if ((e as any).mozInputSource === 0 && e.isTrusted) return true\n  return e.detail === 0 && !(e as PointerEvent).pointerType\n}\n\nexport const isLeftClick = (e: Pick<MouseEvent, \"button\">) => e.button === 0\n\nexport const isContextMenuEvent = (e: Pick<MouseEvent, \"button\" | \"ctrlKey\" | \"metaKey\">) => {\n  return e.button === 2 || (isMac() && e.ctrlKey && e.button === 0)\n}\n\nexport const isModifierKey = (e: Pick<KeyboardEvent, \"ctrlKey\" | \"metaKey\" | \"altKey\">) =>\n  e.ctrlKey || e.altKey || e.metaKey\n","import { isFirefox } from \"@zag-js/dom-query\"\nimport { queueBeforeEvent } from \"./queue-before-event\"\n\nfunction isLinkElement(element: HTMLElement | null | undefined) {\n  return element?.matches(\"a[href]\") ?? false\n}\n\nexport function clickIfLink(element: HTMLElement | null | undefined) {\n  if (!isLinkElement(element)) return\n  const click = () => element!.click()\n  if (isFirefox()) {\n    queueBeforeEvent(element!, \"keyup\", click)\n  } else {\n    queueMicrotask(click)\n  }\n}\n","export function queueBeforeEvent(element: EventTarget, type: string, cb: () => void) {\n  const createTimer = (callback: () => void) => {\n    const timerId = requestAnimationFrame(callback)\n    return () => cancelAnimationFrame(timerId)\n  }\n\n  const cancelTimer = createTimer(() => {\n    element.removeEventListener(type, callSync, true)\n    cb()\n  })\n  const callSync = () => {\n    cancelTimer()\n    cb()\n  }\n\n  element.addEventListener(type, callSync, { once: true, capture: true })\n  return cancelTimer\n}\n","export function fireCustomEvent(el: HTMLElement | null, type: string, init?: CustomEventInit) {\n  if (!el) return\n  const win = el.ownerDocument.defaultView || window\n  const event = new win.CustomEvent(type, init)\n  return el.dispatchEvent(event)\n}\n\nexport function fireBlurEvent(el: HTMLElement, init?: FocusEventInit) {\n  const win = el.ownerDocument.defaultView || window\n  const event = new win.FocusEvent(\"blur\", init)\n  const allowed = el.dispatchEvent(event)\n  const bubbleInit = { ...init, bubbles: true }\n  el.dispatchEvent(new win.FocusEvent(\"focusout\", bubbleInit))\n  return allowed\n}\n","import type { EventKeyOptions } from \"./types\"\n\nconst keyMap: Record<string, string> = {\n  Up: \"ArrowUp\",\n  Down: \"ArrowDown\",\n  Esc: \"Escape\",\n  \" \": \"Space\",\n  \",\": \"Comma\",\n  Left: \"ArrowLeft\",\n  Right: \"ArrowRight\",\n}\n\nconst rtlKeyMap: Record<string, string> = {\n  ArrowLeft: \"ArrowRight\",\n  ArrowRight: \"ArrowLeft\",\n}\n\n/**\n * Determine the event key based on text direction.\n */\nexport function getEventKey(event: Pick<KeyboardEvent, \"key\">, options: EventKeyOptions = {}) {\n  const { dir = \"ltr\", orientation = \"horizontal\" } = options\n\n  let { key } = event\n  key = keyMap[key] ?? key // normalize key\n\n  const isRtl = dir === \"rtl\" && orientation === \"horizontal\"\n\n  if (isRtl && key in rtlKeyMap) {\n    key = rtlKeyMap[key]\n  }\n\n  return key\n}\n","type PointType = \"page\" | \"client\"\n\nfunction pointFromTouch(e: TouchEvent, type: PointType = \"client\") {\n  const point = e.touches[0] || e.changedTouches[0]\n  return { x: point[`${type}X`], y: point[`${type}Y`] }\n}\n\nfunction pointFromMouse(point: MouseEvent | PointerEvent, type: PointType = \"client\") {\n  return { x: point[`${type}X`], y: point[`${type}Y`] }\n}\n\ntype AnyPointerEvent = MouseEvent | TouchEvent | PointerEvent\n\nconst isTouchEvent = (event: AnyPointerEvent): event is TouchEvent => \"touches\" in event && event.touches.length > 0\n\nexport function getEventPoint(event: any, type: PointType = \"client\") {\n  return isTouchEvent(event) ? pointFromTouch(event, type) : pointFromMouse(event, type)\n}\n","const PAGE_KEYS = new Set([\"PageUp\", \"PageDown\"])\nconst ARROW_KEYS = new Set([\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"])\n\n/**\n * Determine the step factor for keyboard events\n */\nexport function getEventStep(event: Pick<KeyboardEvent, \"ctrlKey\" | \"metaKey\" | \"key\" | \"shiftKey\">) {\n  if (event.ctrlKey || event.metaKey) {\n    return 0.1\n  } else {\n    const isPageKey = PAGE_KEYS.has(event.key)\n    const isSkipKey = isPageKey || (event.shiftKey && ARROW_KEYS.has(event.key))\n    return isSkipKey ? 10 : 1\n  }\n}\n","import type { JSX } from \"@zag-js/types\"\n\ntype NativeEvent<E> =\n  JSX.ChangeEvent<any> extends E ? InputEvent : E extends JSX.SyntheticEvent<any, infer T> ? T : never\n\nexport function getNativeEvent<E>(event: E): NativeEvent<E> {\n  return (event as any).nativeEvent ?? event\n}\n","function clamp(value: number) {\n  return Math.max(0, Math.min(1, value))\n}\n\nexport type Point = {\n  x: number\n  y: number\n}\n\ntype PercentValueOptions = {\n  inverted?: boolean | { x?: boolean; y?: boolean }\n  dir?: \"ltr\" | \"rtl\"\n  orientation?: \"vertical\" | \"horizontal\"\n}\n\nexport function getRelativePoint(point: Point, element: HTMLElement) {\n  const { left, top, width, height } = element.getBoundingClientRect()\n\n  const offset = { x: point.x - left, y: point.y - top }\n  const percent = { x: clamp(offset.x / width), y: clamp(offset.y / height) }\n\n  function getPercentValue(options: PercentValueOptions = {}) {\n    const { dir = \"ltr\", orientation = \"horizontal\", inverted } = options\n\n    const invertX = typeof inverted === \"object\" ? inverted.x : inverted\n    const invertY = typeof inverted === \"object\" ? inverted.y : inverted\n\n    if (orientation === \"horizontal\") {\n      return dir === \"rtl\" || invertX ? 1 - percent.x : percent.x\n    }\n\n    return invertY ? 1 - percent.y : percent.y\n  }\n\n  return { offset, percent, getPercentValue }\n}\n","import { addDomEvent } from \"./add-dom-event\"\n\nexport function requestPointerLock(doc: Document, fn?: (locked: boolean) => void) {\n  const body = doc.body\n\n  const supported = \"pointerLockElement\" in doc || \"mozPointerLockElement\" in doc\n  const isLocked = () => !!doc.pointerLockElement\n\n  function onPointerChange() {\n    fn?.(isLocked())\n  }\n\n  function onPointerError(event: Event) {\n    if (isLocked()) fn?.(false)\n    console.error(\"PointerLock error occured:\", event)\n    doc.exitPointerLock()\n  }\n\n  if (!supported) return\n\n  try {\n    body.requestPointerLock()\n  } catch {}\n\n  // prettier-ignore\n  const cleanup = [\n    addDomEvent(doc, \"pointerlockchange\", onPointerChange, false),\n    addDomEvent(doc, \"pointerlockerror\", onPointerError, false)\n  ]\n\n  return () => {\n    cleanup.forEach((cleanup) => cleanup())\n    doc.exitPointerLock()\n  }\n}\n","import { getWindow, isMac } from \"@zag-js/dom-query\"\nimport { addDomEvent } from \"./add-dom-event\"\nimport { pipe } from \"./pipe\"\n\nexport interface TrackFocusOptions {\n  /**\n   * Callback to be called when the element receives focus and is focus-visible.\n   */\n  onFocus?(e: FocusEvent): void\n  /**\n   * Callback to be called when the element loses focus.\n   */\n  onBlur?(e: FocusEvent): void\n}\n\nconst isValidKey = (e: KeyboardEvent) => {\n  return !(\n    e.metaKey ||\n    (!isMac() && e.altKey) ||\n    e.ctrlKey ||\n    e.key === \"Control\" ||\n    e.key === \"Shift\" ||\n    e.key === \"Meta\"\n  )\n}\n\nexport function trackFocusVisible(node: Element | null, options: TrackFocusOptions) {\n  if (!node) return\n  const { onFocus, onBlur } = options\n\n  const win = getWindow(node)\n\n  let focused = false\n\n  const handleFocus = (e: FocusEvent) => {\n    let isFocusVisible = false\n\n    try {\n      isFocusVisible = node.matches(\":focus-visible\")\n    } catch {\n      isFocusVisible = true\n    }\n\n    if (!isFocusVisible) return\n\n    focused = true\n    onFocus?.(e)\n  }\n\n  const handleBlur = (e: FocusEvent) => {\n    if (!focused) return\n    focused = false\n    onBlur?.(e)\n  }\n\n  const handleKeydown = (e: KeyboardEvent) => {\n    if (!node.matches(\":focus\") || !isValidKey(e)) return\n    focused = true\n    const evt = new win.FocusEvent(\"focus\")\n    onFocus?.(evt)\n  }\n\n  return pipe(\n    addDomEvent(node, \"focusin\", handleFocus),\n    addDomEvent(node, \"focusout\", handleBlur),\n    addDomEvent(node, \"keydown\", handleKeydown, true),\n  )\n}\n","export const pipe =\n  <T>(...fns: Array<(arg: T) => T>) =>\n  (arg: T) =>\n    fns.reduce((acc, fn) => fn(acc), arg)\n\nexport const noop = () => void 0\n","import { disableTextSelection } from \"@zag-js/text-selection\"\nimport { addDomEvent } from \"./add-dom-event\"\nimport { getEventPoint } from \"./get-event-point\"\n\ninterface Point {\n  x: number\n  y: number\n}\n\ninterface TimestampedPoint extends Point {\n  /**\n   * The time when the point was recorded.\n   */\n  timestamp: number\n}\n\nexport interface PointerMoveDetails {\n  /**\n   * The current position of the pointer.\n   */\n  point: Point\n  /**\n   * The event that triggered the move.\n   */\n  event: PointerEvent\n  /**\n   * The velocity of the pointer on the x and y axis.\n   */\n  velocity: Point\n}\n\nexport interface PointerMoveHandlers {\n  /**\n   * Called when the pointer is released.\n   */\n  onPointerUp: VoidFunction\n  /**\n   * Called when the pointer moves.\n   */\n  onPointerMove: (details: PointerMoveDetails) => void\n}\n\nexport function trackPointerMove(doc: Document, handlers: PointerMoveHandlers) {\n  const { onPointerMove, onPointerUp } = handlers\n\n  const history: TimestampedPoint[] = []\n\n  const handleMove = (event: PointerEvent) => {\n    const point = getEventPoint(event)\n    history.push({ ...point, timestamp: performance.now() })\n\n    const distance = Math.sqrt(point.x ** 2 + point.y ** 2)\n    const moveBuffer = event.pointerType === \"touch\" ? 10 : 5\n\n    if (distance < moveBuffer) return\n\n    // Because Safari doesn't trigger mouseup events when it's above a `<select>`\n    if (event.pointerType === \"mouse\" && event.button === 0) {\n      onPointerUp()\n      return\n    }\n\n    onPointerMove({ point, event, velocity: getVelocity(history, 0.1) })\n  }\n\n  const cleanups = [\n    addDomEvent(doc, \"pointermove\", handleMove, false),\n    addDomEvent(doc, \"pointerup\", onPointerUp, false),\n    addDomEvent(doc, \"pointercancel\", onPointerUp, false),\n    addDomEvent(doc, \"contextmenu\", onPointerUp, false),\n    disableTextSelection({ doc }),\n  ]\n\n  return () => {\n    cleanups.forEach((cleanup) => cleanup())\n    history.length = 0\n  }\n}\n\nfunction lastDevicePoint(history: TimestampedPoint[]): TimestampedPoint {\n  return history[history.length - 1]\n}\n\nfunction ms(seconds: number): number {\n  return seconds * 1000\n}\n\nfunction sec(milliseconds: number): number {\n  return milliseconds / 1000\n}\n\nfunction getVelocity(history: TimestampedPoint[], timeDelta: number): Point {\n  if (history.length < 2) return { x: 0, y: 0 }\n\n  let i = history.length - 1\n  let timestampedPoint: TimestampedPoint | null = null\n  const lastPoint = lastDevicePoint(history)\n\n  while (i >= 0) {\n    timestampedPoint = history[i]\n    if (lastPoint.timestamp - timestampedPoint.timestamp > ms(timeDelta)) {\n      break\n    }\n    i--\n  }\n\n  if (!timestampedPoint) return { x: 0, y: 0 }\n\n  const time = sec(lastPoint.timestamp - timestampedPoint.timestamp)\n  if (time === 0) return { x: 0, y: 0 }\n\n  const currentVelocity = {\n    x: (lastPoint.x - timestampedPoint.x) / time,\n    y: (lastPoint.y - timestampedPoint.y) / time,\n  }\n\n  if (currentVelocity.x === Infinity) currentVelocity.x = 0\n  if (currentVelocity.y === Infinity) currentVelocity.y = 0\n\n  return {\n    x: Math.abs(currentVelocity.x),\n    y: Math.abs(currentVelocity.y),\n  }\n}\n","import { contains, getDocument, getEventTarget, getWindow } from \"@zag-js/dom-query\"\nimport { addDomEvent } from \"./add-dom-event\"\nimport { getEventPoint } from \"./get-event-point\"\nimport { noop, pipe } from \"./pipe\"\n\ninterface Point {\n  x: number\n  y: number\n}\n\ninterface TapDetails {\n  /**\n   * The current position of the pointer.\n   */\n  point: Point\n  /**\n   * The event that triggered the move.\n   */\n  event: PointerEvent\n}\n\nexport interface TrackPressOptions {\n  /**\n   * The element that will be used to track the pointer events.\n   */\n  pointerNode: Element | null\n  /**\n   * The element that will be used to track the keyboard focus events.\n   */\n  keyboardNode?: Element | null\n  /**\n   * A function that determines if the key is valid for the press event.\n   */\n  isValidKey?(event: KeyboardEvent): boolean\n  /**\n   * A function that will be called when the pointer is pressed.\n   */\n  onPress?(details: TapDetails): void\n  /**\n   * A function that will be called when the pointer is pressed down.\n   */\n  onPressStart?(details: TapDetails): void\n  /**\n   * A function that will be called when the pointer is pressed up or cancelled.\n   */\n  onPressEnd?(details: TapDetails): void\n}\n\nexport function trackPress(options: TrackPressOptions) {\n  const {\n    pointerNode,\n    keyboardNode = pointerNode,\n    onPress,\n    onPressStart,\n    onPressEnd,\n    isValidKey = (e) => e.key === \"Enter\",\n  } = options\n\n  if (!pointerNode) return noop\n\n  const win = getWindow(pointerNode)\n  const doc = getDocument(pointerNode)\n\n  let removeStartListeners: VoidFunction = noop\n  let removeEndListeners: VoidFunction = noop\n  let removeAccessibleListeners: VoidFunction = noop\n\n  const getInfo = (event: PointerEvent): TapDetails => ({\n    point: getEventPoint(event),\n    event,\n  })\n\n  function startPress(event: PointerEvent) {\n    onPressStart?.(getInfo(event))\n  }\n\n  function cancelPress(event: PointerEvent) {\n    onPressEnd?.(getInfo(event))\n  }\n\n  const startPointerPress = (startEvent: PointerEvent) => {\n    removeEndListeners()\n\n    const endPointerPress = (endEvent: PointerEvent) => {\n      const target = getEventTarget<Element>(endEvent)\n      if (contains(pointerNode, target)) {\n        onPress?.(getInfo(endEvent))\n      } else {\n        onPressEnd?.(getInfo(endEvent))\n      }\n    }\n\n    const removePointerUpListener = addDomEvent(win, \"pointerup\", endPointerPress, { passive: !onPress })\n    const removePointerCancelListener = addDomEvent(win, \"pointercancel\", cancelPress, { passive: !onPressEnd })\n\n    removeEndListeners = pipe(removePointerUpListener, removePointerCancelListener)\n\n    if (doc.activeElement === keyboardNode && startEvent.pointerType === \"mouse\") {\n      startEvent.preventDefault()\n    }\n\n    startPress(startEvent)\n  }\n\n  const removePointerListener = addDomEvent(pointerNode, \"pointerdown\", startPointerPress, { passive: !onPressStart })\n  const removeFocusListener = addDomEvent(keyboardNode, \"focus\", startAccessiblePress)\n\n  removeStartListeners = pipe(removePointerListener, removeFocusListener)\n\n  function startAccessiblePress() {\n    const handleKeydown = (keydownEvent: KeyboardEvent) => {\n      if (!isValidKey(keydownEvent)) return\n\n      const handleKeyup = (keyupEvent: KeyboardEvent) => {\n        if (!isValidKey(keyupEvent)) return\n        const evt = new win.PointerEvent(\"pointerup\")\n        const info = getInfo(evt)\n        onPress?.(info)\n        onPressEnd?.(info)\n      }\n\n      removeEndListeners()\n      removeEndListeners = addDomEvent(keyboardNode, \"keyup\", handleKeyup)\n\n      const evt = new win.PointerEvent(\"pointerdown\")\n      startPress(evt)\n    }\n\n    const handleBlur = () => {\n      const evt = new win.PointerEvent(\"pointercancel\")\n      cancelPress(evt)\n    }\n\n    const removeKeydownListener = addDomEvent(keyboardNode, \"keydown\", handleKeydown)\n    const removeBlurListener = addDomEvent(keyboardNode, \"blur\", handleBlur)\n\n    removeAccessibleListeners = pipe(removeKeydownListener, removeBlurListener)\n  }\n\n  return function () {\n    removeStartListeners()\n    removeEndListeners()\n    removeAccessibleListeners()\n  }\n}\n","import { addDomEvent } from \"./add-dom-event\"\n\nexport interface ViewportSize {\n  width: number\n  height: number\n}\n\nexport function trackVisualViewport(doc: Document, fn: (data: ViewportSize) => void) {\n  const win = doc?.defaultView || window\n\n  const onResize = () => {\n    fn?.(getViewportSize(win))\n  }\n\n  onResize()\n\n  return addDomEvent(win.visualViewport ?? win, \"resize\", onResize)\n}\n\nfunction getViewportSize(win: Window): ViewportSize {\n  return {\n    width: win.visualViewport?.width || win.innerWidth,\n    height: win.visualViewport?.height || win.innerHeight,\n  }\n}\n"],"mappings":"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","names":["cleanup","isMac","isMac","getWindow","isValidKey","getWindow","evt"]}
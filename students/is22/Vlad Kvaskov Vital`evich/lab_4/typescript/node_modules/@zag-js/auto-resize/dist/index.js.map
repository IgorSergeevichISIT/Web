{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import { getDocument, getWindow } from \"@zag-js/dom-query\"\n\nfunction copyVisualStyles(fromEl: HTMLElement | null, toEl: HTMLElement) {\n  if (!fromEl) return\n\n  const win = getWindow(fromEl)\n  const el = win.getComputedStyle(fromEl)\n\n  // prettier-ignore\n  const cssText = 'box-sizing:' + el.boxSizing +\n                      ';border-left:' + el.borderLeftWidth + ' solid red' +\n                      ';border-right:' + el.borderRightWidth + ' solid red' +\n                      ';font-family:' + el.fontFamily +\n                      ';font-feature-settings:' + el.fontFeatureSettings +\n                      ';font-kerning:' + el.fontKerning +\n                      ';font-size:' + el.fontSize +\n                      ';font-stretch:' + el.fontStretch +\n                      ';font-style:' + el.fontStyle +\n                      ';font-variant:' + el.fontVariant +\n                      ';font-variant-caps:' + el.fontVariantCaps +\n                      ';font-variant-ligatures:' + el.fontVariantLigatures +\n                      ';font-variant-numeric:' + el.fontVariantNumeric +\n                      ';font-weight:' + el.fontWeight +\n                      ';letter-spacing:' + el.letterSpacing +\n                      ';margin-left:' + el.marginLeft +\n                      ';margin-right:' + el.marginRight +\n                      ';padding-left:' + el.paddingLeft +\n                      ';padding-right:' + el.paddingRight +\n                      ';text-indent:' + el.textIndent +\n                      ';text-transform:' + el.textTransform\n\n  toEl.style.cssText += cssText\n}\n\nfunction createGhostElement(doc: Document) {\n  var el = doc.createElement(\"div\")\n  el.id = \"ghost\"\n  el.style.cssText =\n    \"display:inline-block;height:0;overflow:hidden;position:absolute;top:0;visibility:hidden;white-space:nowrap;\"\n  doc.body.appendChild(el)\n  return el\n}\n\nexport function autoResizeInput(input: HTMLInputElement | null) {\n  if (!input) return\n  const doc = getDocument(input)\n  const win = getWindow(input)\n\n  const ghost = createGhostElement(doc)\n\n  copyVisualStyles(input, ghost)\n\n  function resize() {\n    win.requestAnimationFrame(() => {\n      ghost.innerHTML = input!.value\n      const rect = win.getComputedStyle(ghost)\n      input?.style.setProperty(\"width\", rect.width)\n    })\n  }\n\n  resize()\n\n  input?.addEventListener(\"input\", resize)\n  input?.addEventListener(\"change\", resize)\n\n  return () => {\n    doc.body.removeChild(ghost)\n    input?.removeEventListener(\"input\", resize)\n    input?.removeEventListener(\"change\", resize)\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAuC;AAEvC,SAAS,iBAAiB,QAA4B,MAAmB;AACvE,MAAI,CAAC,OAAQ;AAEb,QAAM,UAAM,4BAAU,MAAM;AAC5B,QAAM,KAAK,IAAI,iBAAiB,MAAM;AAGtC,QAAM,UAAU,gBAAgB,GAAG,YACf,kBAAkB,GAAG,kBAAkB,6BACpB,GAAG,mBAAmB,4BACvB,GAAG,aACrB,4BAA4B,GAAG,sBAC/B,mBAAmB,GAAG,cACtB,gBAAgB,GAAG,WACnB,mBAAmB,GAAG,cACtB,iBAAiB,GAAG,YACpB,mBAAmB,GAAG,cACtB,wBAAwB,GAAG,kBAC3B,6BAA6B,GAAG,uBAChC,2BAA2B,GAAG,qBAC9B,kBAAkB,GAAG,aACrB,qBAAqB,GAAG,gBACxB,kBAAkB,GAAG,aACrB,mBAAmB,GAAG,cACtB,mBAAmB,GAAG,cACtB,oBAAoB,GAAG,eACvB,kBAAkB,GAAG,aACrB,qBAAqB,GAAG;AAE5C,OAAK,MAAM,WAAW;AACxB;AAEA,SAAS,mBAAmB,KAAe;AACzC,MAAI,KAAK,IAAI,cAAc,KAAK;AAChC,KAAG,KAAK;AACR,KAAG,MAAM,UACP;AACF,MAAI,KAAK,YAAY,EAAE;AACvB,SAAO;AACT;AAEO,SAAS,gBAAgB,OAAgC;AAC9D,MAAI,CAAC,MAAO;AACZ,QAAM,UAAM,8BAAY,KAAK;AAC7B,QAAM,UAAM,4BAAU,KAAK;AAE3B,QAAM,QAAQ,mBAAmB,GAAG;AAEpC,mBAAiB,OAAO,KAAK;AAE7B,WAAS,SAAS;AAChB,QAAI,sBAAsB,MAAM;AAC9B,YAAM,YAAY,MAAO;AACzB,YAAM,OAAO,IAAI,iBAAiB,KAAK;AACvC,aAAO,MAAM,YAAY,SAAS,KAAK,KAAK;AAAA,IAC9C,CAAC;AAAA,EACH;AAEA,SAAO;AAEP,SAAO,iBAAiB,SAAS,MAAM;AACvC,SAAO,iBAAiB,UAAU,MAAM;AAExC,SAAO,MAAM;AACX,QAAI,KAAK,YAAY,KAAK;AAC1B,WAAO,oBAAoB,SAAS,MAAM;AAC1C,WAAO,oBAAoB,UAAU,MAAM;AAAA,EAC7C;AACF;","names":[]}